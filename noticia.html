<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notícia - Portal Marvão</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-primary': '#E53935', // Modern deep red
                        'brand-secondary': '#FF6D00', // Vibrant orange-red
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Topbar -->
    <div class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-2 flex justify-between items-center">
            <div class="flex items-center space-x-3 text-gray-600">
                <i class="far fa-calendar-alt"></i>
                <span id="current-date" class="text-sm"></span>
            </div>
            
            <div class="flex space-x-4">
                <a href="#" class="text-red-600 hover:text-red-800 transition"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-red-500 hover:text-red-700 transition"><i class="fab fa-twitter"></i></a>
                <a href="#" class="text-red-600 hover:text-red-800 transition"><i class="fab fa-instagram"></i></a>
                <a href="#" class="text-red-700 hover:text-red-900 transition"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-md py-6">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-brand-primary">Portal <span class="text-brand-secondary">Marvão</span></h1>
                <p class="text-gray-600">Sua fonte confiável de notícias</p>
            </div>
            
            <div class="hidden md:block">
                <img src="assets/images/header-ad.jpg" alt="Espaço publicitário" class="max-w-xs rounded-lg shadow-md">
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-brand-primary text-white">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <ul class="hidden md:flex space-x-6">
                    <li><a href="index.html" class="hover:text-brand-secondary transition"><i class="fas fa-home mr-2"></i>Home</a></li>
                    <li><a href="#" class="hover:text-brand-secondary transition"><i class="fas fa-landmark mr-2"></i>Política</a></li>
                    <li><a href="#" class="hover:text-brand-secondary transition"><i class="fas fa-chart-line mr-2"></i>Economia</a></li>
                    <li><a href="#" class="hover:text-brand-secondary transition"><i class="fas fa-microchip mr-2"></i>Tecnologia</a></li>
                    <li><a href="#" class="hover:text-brand-secondary transition"><i class="fas fa-futbol mr-2"></i>Esportes</a></li>
                </ul>
                
                <div class="md:hidden">
                    <button class="mobile-menu-toggle text-2xl">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                
                <div class="hidden md:block">
                    <input type="text" placeholder="Buscar notícias..." 
                        class="px-3 py-2 rounded-full bg-white/20 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-brand-secondary">
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="grid md:grid-cols-3 gap-8">
            <div class="md:col-span-2">
                <article id="article-content" class="bg-white rounded-lg shadow-md p-8">
                    <!-- O conteúdo será carregado via JavaScript -->
                </article>
            </div>
            
            <!-- Sidebar -->
            <aside>
                <!-- Newsletter -->
                <div class="bg-white shadow-md rounded-lg p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-brand-primary">Assine nossa newsletter</h3>
                    <form id="newsletterForm" class="space-y-4">
                        <input 
                            type="email" 
                            placeholder="Seu melhor e-mail" 
                            required 
                            class="w-full px-3 py-2 border rounded focus:ring-2 focus:ring-brand-secondary"
                        >
                        <button 
                            type="submit" 
                            class="w-full bg-brand-secondary text-white py-2 rounded hover:bg-orange-600 transition"
                        >
                            Assinar
                        </button>
                    </form>
                </div>

                <!-- Mais Lidas -->
                <div class="bg-white shadow-md rounded-lg p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-brand-primary">Mais Lidas</h3>
                    <ul id="mostRead" class="space-y-4">
                        <!-- Most read posts will be loaded dynamically -->
                    </ul>
                </div>

                <!-- Advertising -->
                <div class="mb-6">
                    <img src="assets/images/sidebar-ad.jpg" alt="Publicidade" class="w-full rounded-lg shadow-md">
                </div>
            </aside>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Portal Marvão</h3>
                    <p class="text-gray-300 mb-4">O Portal Marvão é referência em jornalismo digital, trazendo notícias confiáveis.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-2xl text-red-500 hover:text-red-600"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-2xl text-red-500 hover:text-red-600"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-2xl text-red-500 hover:text-red-600"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-2xl text-red-500 hover:text-red-600"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Links Úteis</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Política de Privacidade</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Termos de Uso</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Anuncie Conosco</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Categorias</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Política</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Economia</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Tecnologia</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Esportes</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Contato</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            <span>Rua das Notícias, 123</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone mr-2"></i>
                            <span>(11) 1234-5678</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2"></i>
                            <span>contato@portalmarvao.com.br</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="text-center text-gray-400 mt-8 pt-6 border-t border-gray-700">
                <p>&copy; 2024 Portal Marvão. Todos os direitos reservados.</p>
                <p>Desenvolvido com <i class="fas fa-heart text-red-500"></i> pela equipe Marvão</p>
            </div>
        </div>
    </footer>

    <script>
        // Helper Functions
        function formatDate(dateString) {
            const options = { day: '2-digit', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
            return new Date(dateString).toLocaleDateString('pt-BR', options);
        }

        function extractYouTubeId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function getCategoryColor(category) {
            const colors = {
                'Política': 'bg-red-500',
                'Economia': 'bg-blue-500',
                'Tecnologia': 'bg-purple-500',
                'Esportes': 'bg-green-500',
                'Saúde': 'bg-pink-500'
            };
            return colors[category] || 'bg-gray-500';
        }

        function loadPublishedPosts() {
            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            return posts.filter(post => post.published)
                       .sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate));
        }

        function updateCurrentDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const now = new Date();
            document.getElementById('current-date').textContent = now.toLocaleDateString('pt-BR', options);
        }

        function loadMostRead() {
            const posts = loadPublishedPosts();
            const mostReadContainer = document.getElementById('mostRead');
            
            if (posts.length > 0) {
                const mostReadPosts = [...posts].sort(() => 0.5 - Math.random()).slice(0, 5);
                mostReadContainer.innerHTML = mostReadPosts.map((post, index) => `
                    <li class="flex items-start">
                        <span class="text-brand-primary font-bold mr-3">${index + 1}</span>
                        <a href="noticia.html?id=${post.id}" class="hover:text-brand-primary transition">${post.title}</a>
                    </li>
                `).join('');
            } else {
                mostReadContainer.innerHTML = '<li class="text-gray-500">Nenhuma notícia popular no momento.</li>';
            }
        }

        function setupNewsletter() {
            const form = document.getElementById('newsletterForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = this.querySelector('input[type="email"]').value;
                    alert(`Obrigado por assinar nossa newsletter! Um e-mail foi enviado para ${email}`);
                    this.reset();
                });
            }
        }

        function loadArticle() {
            const urlParams = new URLSearchParams(window.location.search);
            const postId = parseInt(urlParams.get('id'));
            
            if (postId) {
                const posts = JSON.parse(localStorage.getItem('posts')) || [];
                const post = posts.find(p => p.id === postId && p.published);
                
                if (post) {
                    document.title = `${post.title} - Portal Marvão`;
                    
                    const articleContent = document.getElementById('article-content');
                    articleContent.innerHTML = `
                        <div class="article-header mb-8">
                            <span class="inline-block px-3 py-1 mb-4 rounded-full text-white text-sm font-bold ${getCategoryColor(post.category)}">${post.category}</span>
                            <h1 class="text-3xl font-bold mb-4 text-gray-900">${post.title}</h1>
                            <div class="text-gray-600 text-sm mb-6 flex items-center space-x-4">
                                <span><i class="far fa-clock mr-2"></i> ${formatDate(post.publishDate)}</span>
                                <span><i class="far fa-user mr-2"></i> ${post.author || 'Redação'}</span>
                            </div>
                        </div>
                        
                        <div class="article-image mb-8">
                            <img src="${post.image ? `assets/images/${post.image}` : 'assets/images/default-featured.jpg'}" 
                                 alt="${post.title}" 
                                 class="w-full rounded-lg shadow-md">
                        </div>
                        
                        <div class="article-text space-y-4">
                            ${post.content.split('\n').map(paragraph => `<p class="text-gray-700">${paragraph}</p>`).join('')}
                        </div>
                        
                        ${post.video ? `
                        <div class="article-video mt-8">
                            <h3 class="text-xl font-bold mb-4 text-brand-primary">Vídeo relacionado</h3>
                            <div class="video-container rounded-lg overflow-hidden shadow-md">
                                <iframe src="https://www.youtube.com/embed/${extractYouTubeId(post.video)}" 
                                        class="w-full h-96" 
                                        frameborder="0" 
                                        allowfullscreen></iframe>
                            </div>
                        </div>
                        ` : ''}
                    `;
                } else {
                    document.getElementById('article-content').innerHTML = `
                        <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative" role="alert">
                            <strong class="font-bold">Notícia não encontrada</strong>
                            <p>A notícia que você está tentando acessar não existe ou não está mais disponível.</p>
                            <a href="index.html" class="mt-4 inline-block bg-brand-primary text-white px-4 py-2 rounded hover:bg-brand-secondary transition">Voltar para a página inicial</a>
                        </div>
                    `;
                }
            }
        }

        // Inicialização quando o DOM estiver pronto
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            loadArticle();
            loadMostRead();
            setupNewsletter();
        });
    </script>
</body>
</html>